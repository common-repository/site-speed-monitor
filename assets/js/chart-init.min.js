!function(a){function b(a){var b=[];for(var c in a)b.push(a[c]);return b}var c=document.getElementById("speed-test-chart").getContext("2d"),d=b(chartSettings.data.labels),e=b(chartSettings.data.firstView),f=b(chartSettings.data.repeatView),g={init:function(){var a={enabled:!0,position:"nearest",mode:"index",intersect:!1,callbacks:{title:function(a,b){return chartSettings.options.toolTipTitle+" - "+a[0].xLabel},label:function(a,b){return b.datasets[a.datasetIndex].label+": "+a.yLabel+" "+chartSettings.options.secondsLabel}}};chartSettings.chartOptions.displayDiff&&(a.custom=g.customTooltip),new Chart(c,{type:"line",data:{labels:d,datasets:[{label:chartSettings.firstView.label,data:e,borderWidth:1,fill:!1,backgroundColor:chartSettings.firstView.color,borderColor:chartSettings.firstView.color,pointBackgroundColor:chartSettings.firstView.color,pointBorderColor:chartSettings.firstView.color,pointHoverBackgroundColor:chartSettings.firstView.color,pointHoverBorderColor:chartSettings.firstView.color},{label:chartSettings.repeatView.label,data:f,borderWidth:1,fill:!1,backgroundColor:chartSettings.repeatView.color,borderColor:chartSettings.repeatView.color,pointBackgroundColor:chartSettings.repeatView.color,pointBorderColor:chartSettings.repeatView.color,pointHoverBackgroundColor:chartSettings.repeatView.color,pointHoverBorderColor:chartSettings.repeatView.color}]},options:{responsive:!0,maintainAspectRatio:!1,title:{display:!0,text:chartSettings.options.chartTitle,fontSize:16},elements:{line:{tension:0}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:chartSettings.yAxisLabel}}],xAxes:[{scaleLabel:{display:!0,labelString:chartSettings.xAxisLabel}}]},tooltips:a}})},customTooltip:function(b){a(this._chart.canvas).css("cursor","pointer"),a(".chartjs-tooltip").css({opacity:0,height:0,margin:0}),b&&b.opacity&&b.dataPoints.length>0&&b.dataPoints.forEach(function(c){var d=(b.labelColors[c.datasetIndex].backgroundColor,a("#site-speed-monitor-diff-tooltip")),e=chartSettings.data.toolTipFooters[c.index]?chartSettings.data.toolTipFooters[c.index]:chartSettings.chartOptions.noDiffMessage;d.html('<div class="interior">'+e+"</div>"),d.css({opacity:1,height:"auto",margin:"10px 0 0 0"})})}},h={tooltips:function(){a(".js-option-tooltip").each(function(){a(this).tipso({background:"rgba( 51, 51, 51, 0.80 )",tooltipHover:!0,size:"medium",titleContent:a(this).data("tooltip-title"),content:a(this).data("tooltip")})})},toggle:function(b){b.preventDefault();var c=a(b.target).attr("checked"),d=a(b.target).attr("name");h.updateOption(d,c)},updateOption:function(b,c){a.post(ajaxurl,{action:"update_chart_option",option:b,isChecked:"checked"===c?1:0},function(b){if(a(".chart-options-notice").remove(),!b.success)return void a(".chart-options").prepend('<div class="notice notice-error chart-options-notice"><p>'+chartSettings.chartOptions.error+"</p></div>");a(".chart-options").find('input[type="checkbox"]').attr("disabled","disabled"),a(".chart-options").prepend('<div class="notice notice-success chart-options-notice"><p>'+chartSettings.chartOptions.preloader+" "+chartSettings.chartOptions.success+"</p></div>"),location.reload()})}};a(document).ready(g.init),a(document).ready(h.tooltips),a(document).on("change",".js-chart-option",h.toggle),a(document).on("click",".row-actions .delete a",function(a){if(!confirm(chartSettings.testDelete.confirmation))return void a.preventDefault()})}(jQuery);